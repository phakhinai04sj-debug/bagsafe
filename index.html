<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Airport Safety Kiosk Enterprise - RTL Ready</title>

<!-- Google Fonts รองรับทุกภาษา -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;600&family=Noto+Sans+Arabic:wght@400;600&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
  margin:0;
  font-family:"Noto Sans","Noto Sans Arabic",sans-serif;
  background:#0b1220;
  color:white;
  text-align:center;
  transition:0.3s;
}
header{
  background:#111827;
  padding:15px;
  position:sticky;
  top:0;
  z-index:10;
}
h1{margin:5px;color:#ff2d2d;}
select,button{
  padding:8px 12px;
  border-radius:8px;
  border:none;
  margin:5px;
  cursor:pointer;
}
button{background:#374151;color:white;}
button:hover{background:#b91c1c;}
.message{
  font-size:20px;
  font-weight:bold;
  min-height:40px;
  margin-top:10px;
}
.card-group{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
  gap:20px;
  padding:20px;
}
.card{
  background:#1f2937;
  border-radius:15px;
  padding:20px;
  cursor:pointer;
  transition:.3s;
}
.card:hover{transform:scale(1.05);}
.admin-panel{
  display:none;
  background:#111827;
  padding:20px;
}
canvas{max-width:700px;margin:auto;}
.rtl{
  direction:rtl;
  text-align:right;
}
</style>
</head>
<body>

<header>
<h1 id="title"></h1>
<div id="instruction"></div>

<select onchange="changeLang(this.value)">
<option value="th">ไทย</option>
<option value="en">English</option>
<option value="zh">中文</option>
<option value="ja">日本語</option>
<option value="ko">한국어</option>
<option value="ar">العربية</option>
<option value="fr">Français</option>
<option value="de">Deutsch</option>
<option value="es">Español</option>
<option value="ru">Русский</option>
<option value="hi">हिन्दी</option>
</select>

<button onclick="enterAdmin()">Admin</button>
<button onclick="goFullscreen()">Kiosk Mode</button>

<div class="message" id="message"></div>
</header>

<div class="card-group" id="cards"></div>

<div class="admin-panel" id="adminPanel">
<h2>Admin Dashboard</h2>
<canvas id="chart"></canvas>
<br><br>
<button onclick="exportPDF()">Export PDF</button>
<button onclick="resetStats()">Reset Statistics</button>
</div>

<script>
let currentLang="th";
const ADMIN_PASS="1234";
let stats=JSON.parse(localStorage.getItem("stats"))||{};

const baseItems=["Power Bank","Battery","E-Cigarette","Laptop","Lighter","Explosives","Hazardous Chemical","Weapon","Unsure"];

const translations={
ar:{
title:"نظام سلامة أمتعة المطار",
instruction:"يرجى اختيار العنصر",
items:["شاحن متنقل","بطارية","سيجارة إلكترونية","حاسوب محمول","ولاعة","متفجرات","مواد كيميائية خطرة","سلاح","غير متأكد"],
warning:"❌ غير مسموح في الأمتعة المشحونة",
warningSpeak:"هذا العنصر غير مسموح في الأمتعة المشحونة. يرجى حمله داخل الطائرة.",
ask:"⚠ يرجى سؤال الموظفين",
askSpeak:"يرجى سؤال موظفي المطار."
},
en:{
title:"Airport Baggage Safety System",
instruction:"Please select an item",
items:baseItems,
warning:"❌ Not permitted in checked baggage",
warningSpeak:"This item is not permitted in checked baggage. Please carry it on board.",
ask:"⚠ Please ask airport staff",
askSpeak:"Please ask airport staff for assistance."
},
th:{
title:"ระบบตรวจสอบสัมภาระสนามบิน",
instruction:"กรุณาเลือกสิ่งของ",
items:["พาวเวอร์แบงค์","แบตเตอรี่","บุหรี่ไฟฟ้า","โน้ตบุ๊ก","ไฟแช็ก","วัตถุระเบิด","สารเคมีอันตราย","อาวุธ","ไม่แน่ใจ"],
warning:"❌ ห้ามโหลดใต้ท้องเครื่อง",
warningSpeak:"ไม่สามารถโหลดใต้ท้องเครื่องได้ กรุณาถือขึ้นเครื่องเท่านั้น",
ask:"⚠ โปรดสอบถามเจ้าหน้าที่",
askSpeak:"กรุณาสอบถามเจ้าหน้าที่"
}
};

// เติมภาษาอื่นใช้ baseItems อัตโนมัติ
["zh","ja","ko","fr","de","es","ru","hi"].forEach(lang=>{
translations[lang]={
title:lang.toUpperCase()+" Airport System",
instruction:"Select item",
items:baseItems,
warning:"❌ Not permitted",
warningSpeak:"This item is not permitted in checked baggage.",
ask:"⚠ Ask staff",
askSpeak:"Please ask airport staff."
};
});

const langCodes={
th:"th-TH",en:"en-US",zh:"zh-CN",ja:"ja-JP",ko:"ko-KR",ar:"ar-SA",
fr:"fr-FR",de:"de-DE",es:"es-ES",ru:"ru-RU",hi:"hi-IN"
};

function applyDirection(lang){
if(lang==="ar"){
document.body.classList.add("rtl");
document.documentElement.dir="rtl";
}else{
document.body.classList.remove("rtl");
document.documentElement.dir="ltr";
}
}

function speak(text){
const utter=new SpeechSynthesisUtterance(text);
utter.lang=langCodes[currentLang];
utter.rate=0.95;
speechSynthesis.cancel();
speechSynthesis.speak(utter);
}

function renderCards(){
const container=document.getElementById("cards");
container.innerHTML="";
translations[currentLang].items.forEach((item,i)=>{
const card=document.createElement("div");
card.className="card";
card.innerText=item;
card.onclick=()=>selectItem(i);
container.appendChild(card);
});
}

function selectItem(index){
const data=translations[currentLang];
const msg=document.getElementById("message");

const key=currentLang+"-"+data.items[index];
stats[key]=(stats[key]||0)+1;
localStorage.setItem("stats",JSON.stringify(stats));

if(index===8){
msg.innerText=data.ask;
speak(data.askSpeak);
}else{
msg.innerText=data.warning;
speak(data.warningSpeak);
}
}

function changeLang(lang){
currentLang=lang;
applyDirection(lang);
document.getElementById("title").innerText=translations[lang].title;
document.getElementById("instruction").innerText=translations[lang].instruction;
renderCards();
}

function enterAdmin(){
const pass=prompt("Enter Admin Password:");
if(pass===ADMIN_PASS){
document.getElementById("adminPanel").style.display="block";
renderChart();
}else{alert("Access Denied");}
}

function renderChart(){
new Chart(document.getElementById("chart"),{
type:"bar",
data:{labels:Object.keys(stats),
datasets:[{label:"Selections",data:Object.values(stats),backgroundColor:"#ff2d2d"}]}
});
}

function exportPDF(){
const { jsPDF }=window.jspdf;
const doc=new jsPDF();
doc.text("Airport Kiosk Report",20,20);
let y=30;
for(let key in stats){
doc.text(key+" : "+stats[key],20,y);
y+=10;
}
doc.save("Airport_Report.pdf");
}

function resetStats(){
localStorage.removeItem("stats");
location.reload();
}

function goFullscreen(){
document.documentElement.requestFullscreen();
}

changeLang("th");
</script>
</body>
</html>
